<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kor Constructions - Κτίρια</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-title">
                    <h1>Kor Constructions</h1>
                    <p>Διαχείριση Κτιρίων & Έργων</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-back-dashboard" onclick="window.location.href='/index.html'">
                        🏠 Επιστροφή στο Dashboard
                    </button>
                </div>
            </div>
        </header>

        <!-- Tab Navigation -->
        <nav class="tabs">
            <button class="tab-button active" data-tab="buildings">Κτίρια</button>
            <button class="tab-button" data-tab="floors">Διαμερίσματα</button>
        </nav>

        <!-- Tab Content -->
        <main class="tab-content-wrapper">
            <!-- Buildings Tab -->
            <div id="buildings-tab" class="tab-content active">
                <div class="list-header">
                    <h2>Λίστα Κτιρίων</h2>
                    <button class="btn btn-primary" id="add-building-btn">➕ Νέο Κτίριο</button>
                </div>
                <div id="buildings-container">
                    <p class="loading">Φόρτωση κτιρίων...</p>
                </div>
            </div>

            <!-- Apartments Tab -->
            <div id="floors-tab" class="tab-content">
                <div class="list-header">
                    <h2>Λίστα Διαμερισμάτων</h2>
                    <button class="btn btn-primary" id="add-floor-btn">➕ Νέο Διαμέρισμα</button>
                </div>
                <div class="form-group" style="max-width: 300px; margin-bottom: 20px; padding: 0 30px;">
                    <label for="filter-building">Φιλτράρισμα ανά Κτίριο</label>
                    <select id="filter-building">
                        <option value="">Όλα τα κτίρια</option>
                    </select>
                </div>
                <div id="floors-container" style="padding: 0 30px;">
                    <p class="loading">Φόρτωση διαμερισμάτων...</p>
                </div>
            </div>
        </main>
    </div>

    <!-- Building Form Modal -->
    <div id="building-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="building-modal-title">Νέο Κτίριο</h2>
                <button class="modal-close" onclick="closeBuildingModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="building-form">
                    <input type="hidden" id="building-id">

                    <div class="form-group">
                        <label for="building-name">Όνομα Κτιρίου *</label>
                        <input type="text" id="building-name" required>
                    </div>

                    <div class="form-group">
                        <label for="building-address">Διεύθυνση *</label>
                        <input type="text" id="building-address" required>
                    </div>

                    <div class="form-group">
                        <label for="building-number-of-floors">Αριθμός Ορόφων</label>
                        <input type="number" id="building-number-of-floors" min="0">
                    </div>

                    <div class="form-group">
                        <label for="building-customer">Πελάτης</label>
                        <select id="building-customer">
                            <option value="">Επιλέξτε πελάτη</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="building-status">Κατάσταση *</label>
                        <select id="building-status" required>
                            <option value="PLANNING">Σχεδιασμός</option>
                            <option value="IN_PROGRESS">Σε Εξέλιξη</option>
                            <option value="COMPLETED">Ολοκληρωμένο</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="building-description">Περιγραφή</label>
                        <textarea id="building-description" rows="4"></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="building-submit-btn">Αποθήκευση</button>
                        <button type="button" class="btn btn-secondary" onclick="closeBuildingModal()">Ακύρωση</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Apartment Form Modal -->
    <div id="floor-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="floor-modal-title">Νέο Διαμέρισμα</h2>
                <button class="modal-close" onclick="closeFloorModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="floor-form">
                    <input type="hidden" id="floor-id">

                    <div class="form-group">
                        <label for="floor-building">Κτίριο *</label>
                        <select id="floor-building" required>
                            <option value="">Επιλέξτε κτίριο</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="floor-number">Όροφος *</label>
                            <input type="text" id="floor-number" required placeholder="π.χ. 1, 2, Ισόγειο">
                        </div>

                        <div class="form-group">
                            <label for="floor-square-meters">Τετραγωνικά (m²)</label>
                            <input type="number" id="floor-square-meters" step="0.01" min="0">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="floor-price">Τιμή (€)</label>
                        <input type="number" id="floor-price" step="0.01" min="0">
                    </div>

                    <div class="form-group">
                        <label for="floor-description">Περιγραφή</label>
                        <input type="text" id="floor-description">
                    </div>

                    <div class="form-group">
                        <label for="floor-details">Λεπτομέρειες</label>
                        <textarea id="floor-details" rows="3"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="floor-image">Εικόνα Διαμερίσματος</label>
                        <input type="file" id="floor-image" accept="image/*">
                        <div id="floor-image-preview" style="margin-top: 10px; display: none;">
                            <img id="floor-preview-img" style="max-width: 100%; max-height: 200px; border-radius: 5px;">
                        </div>
                    </div>

                    <!-- Notes Section -->
                    <div id="floor-notes-section" style="border-top: 2px solid #ddd; margin-top: 20px; padding-top: 20px; display: none;">
                        <h3>Σημειώσεις Διαμερίσματος</h3>

                        <!-- Notes List -->
                        <div id="notes-list" style="margin-bottom: 20px; max-height: 300px; overflow-y: auto; border: 1px solid #ddd; padding: 10px; border-radius: 5px; background: #f9f9f9;">
                            <p class="text-center text-muted">Φόρτωση σημειώσεων...</p>
                        </div>

                        <!-- Add/Edit Note Form -->
                        <div id="note-form-container">
                            <h4 id="note-form-title">Νέα Σημείωση</h4>
                            <input type="hidden" id="note-id">

                            <div class="form-group">
                                <label for="note-title">Τίτλος *</label>
                                <input type="text" id="note-title" class="form-control" maxlength="255" required>
                            </div>

                            <div class="form-group">
                                <label for="note-description">Περιγραφή</label>
                                <textarea id="note-description" class="form-control" maxlength="2000" rows="4"></textarea>
                                <small id="char-count" class="text-muted">0 / 2000</small>
                            </div>

                            <div class="form-actions" style="margin-top: 10px;">
                                <button type="button" class="btn btn-primary" id="note-submit-btn" onclick="handleNoteFormSubmit(event)">Αποθήκευση</button>
                                <button type="button" class="btn btn-secondary" id="note-cancel-btn" onclick="cancelNoteEdit()" style="display: none;">Ακύρωση</button>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="floor-submit-btn">Αποθήκευση</button>
                        <button type="button" class="btn btn-secondary" onclick="closeFloorModal()">Ακύρωση</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Image Viewer Modal -->
    <div id="image-viewer-modal" class="modal" style="display: none;" onclick="closeImageViewer()">
        <div class="modal-content" style="max-width: 90%; max-height: 90vh; padding: 20px; background: transparent; box-shadow: none;" onclick="event.stopPropagation()">
            <div style="position: relative; text-align: center;">
                <!-- Close button at top -->
                <button class="btn btn-secondary" onclick="closeImageViewer()" style="margin-bottom: 10px; background: white; color: #333; font-size: 16px; padding: 10px 20px;">
                    ✕ Κλείσιμο
                </button>
                <!-- Image -->
                <img id="viewer-image" src="" style="max-width: 100%; max-height: 75vh; border-radius: 10px; display: block; margin: 0 auto; box-shadow: 0 10px 40px rgba(0,0,0,0.5);">
                <!-- Close button at bottom -->
                <button class="btn btn-secondary" onclick="closeImageViewer()" style="margin-top: 10px; background: white; color: #333; font-size: 16px; padding: 10px 20px;">
                    ✕ Κλείσιμο
                </button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
    <script src="js/buildings.js"></script>
    <script src="js/floornotes.js"></script>
</body>
</html>
